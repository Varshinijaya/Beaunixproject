<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products</title>
    <link rel="stylesheet" href="style.css">
     <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />


      <style>
 * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: Arial, sans-serif;
      background: #f8f8f8;
    }
 
        .cart {
      display: flex;
      justify-content: center;
      
      
      gap: 20px;
    }

    .icon-box {
      width: 50px;
      height: 50px;
      background-color: white;
      border: 1px solid #ddd;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      color:black;
    }

    .icon-box:hover {
      background-color: #F08080;
      transform: scale(1.05);
      color:white;
    }

    .icon-box i {
      font-size: 20px;}
      
      h1 {
      text-align: center;
      margin-bottom: 30px;
      margin-top: 30px;
    }

    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .search-box {
      position: relative;
      width: 70%;
      border-radius: 20px;
    
      border: none;
      
    }

    .search-box input {
      width: 100%;
      padding: 8px 35px 8px 12px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .search-box i {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: #999;
    }

    .sort-btn {
      padding: 8px 15px;
      background-color:#F08080;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .sort-btn:hover {
      background-color: #c2185b;
    }

    .catalog {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 60px;
      max-width: 1200px;
      margin: 0 auto 50px;
    }

    .product-card {
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease;
      text-align: center;
    }

    .product-card:hover {
      transform: scale(1.02);
    }

    .product-card img {
      width: 100%;
      height: 250px;
      object-fit: cover;
    }

    .product-info {
      padding: 15px;
    }

    .product-name {
      font-size: 16px;
      font-weight: 600;
      margin: 10px 0;
    }

    .desc{
      margin-bottom: 10px;
      font-size: 1.3em;
    }

    .price {
      color:#cd6262;
      font-weight: bold;
      margin-bottom: 8px;
      font-size: 2.3em;
    }

    .stock {
      font-size: 14px;
      color: green;
      margin-bottom: 12px;
    }

    .add-cart-btn {
      display: inline-block;
      padding: 12px 17px;
      background-color:#F08080;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      text-decoration: none;
      transition: background 0.3s ease;
      font-weight: bolder;
      font-size: 1.5em;
    }

    .add-cart-btn:hover {
      background-color: #c2185b;
    }

    .pagination {
      text-align: center;
    }

    .pagination button {
      background-color: #fff;
      border: 1px solid #ccc;
      color: #333;
      margin: 0 5px;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
    }

    .pagination button.active {
      background-color: #e91e63;
      color: #fff;
      border-color: #e91e63;
    }

    @media (min-width: 992px) {
      .catalog {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    @media (min-width: 600px) and (max-width: 991px) {
      .catalog {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 599px) {
      .catalog {
        grid-template-columns: 1fr;
      }
    }

      .pagination button {
  background-color: #fff;
  border: 1px solid #ccc;
  color: #333;
  margin: 0 5px;
  padding: 8px 14px;
  border-radius: 5px;
  cursor: pointer;
  font-size: 1em;
}

.pagination button:hover:not(:disabled) {
  background-color: #f08080;
  color: white;
}

.pagination button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}


   .pagination span {
  margin: 0 6px;
  color: #555;
  font-weight: bold;
}



    
      </style>
      
</head>
<body>
    <!-- navbar -->
     <section id="header" class="header">
      <a href="#" class="logo"><i class="fas fa-female"></i> BEAUNIX</a>
      <nav class="navbar">
        <a href="index.html">Home</a>
        <a href="#about">About</a>
        <a href="read.html">Reviews</a>
        <a href="product.html">Products</a>
        <a href="#gallery">Brands</a>
        <a href="#message">Profile</a>
      </nav>

<div class="cart">
     <div class="icon-box">
    <i class="fas fa-heart"></i>
  </div>
<a href="order.html">
  <div class="icon-box cart-icon">
    <i class="fas fa-shopping-bag"></i>
  </div></a>
</div>
      
    <a href="login.html" class="btn1">LogIn</a> 
    </section>

    
 
<h1>Our Products</h1>

<!-- Controls -->
<div class="controls">
  <div class="search-box">
    <input type="text" id="searchInput" placeholder="Search products...Foundation, Concealer, Lipstick, compact, Eyeliner, Mascara, Kajal, Perfume" />
    <i class="fas fa-search"></i>
  </div>
  <button class="sort-btn" onclick="sortProducts()">Sort by Price ↑</button>
</div>

<!-- Catalog -->
<div class="catalog" id="catalog">



 
</div>

<!-- Pagination -->
<div class="pagination" id="pagination"></div>





<script>
  const catalog = document.getElementById('catalog');
  const pagination = document.getElementById('pagination');
  const searchInput = document.getElementById('searchInput');
  const productsPerPage = 20;
  let currentPage = 1;
  let allProducts = [];

  function getFilteredProducts() {
    const query = searchInput.value.toLowerCase().trim();
    return allProducts.filter(p => p.name.toLowerCase().includes(query));
  }

  function showPage(page) {
    const filtered = getFilteredProducts();
    const start = (page - 1) * productsPerPage;
    const end = start + productsPerPage;

    catalog.innerHTML = '';
    filtered.slice(start, end).forEach(product => {
      const stockText = product.stock_quantity > 0
        ?`<span class="stock" style="color: green;">In Stock</span>`
        : `<span class="stock" style="color: red;">Out of Stock</span>`;

     catalog.innerHTML +=`
  <a href="productDetail.html?id=${product._id}" style="text-decoration:none; color:inherit;">
    <div class="product-card">
      <img src="${product.image}" alt="${product.name}">
      <div class="product-info">
        <h3 class="product-name">${product.name}</h3>
        <p class="desc">${product.description}</p>
        <p class="price">₹${product.price}</p>
        ${stockText}
      </div>
    </div>
  </a>
`;

    });

    renderPagination(filtered.length);
    currentPage = page;
  }

  function renderPagination(totalItems) {
  const totalPages = Math.ceil(totalItems / productsPerPage);
  const maxVisibleButtons = 5;
  pagination.innerHTML = '';

  const createButton = (label, page = null, disabled = false, active = false) => {
    const btn = document.createElement('button');
    btn.textContent = label;
    if (active) btn.classList.add('active');
    if (disabled) btn.disabled = true;
    if (page !== null && !disabled) btn.onclick = () => showPage(page);
    pagination.appendChild(btn);
  };

  // Previous button
  createButton('‹', currentPage - 1, currentPage === 1);

  // Always show first page
  createButton(1, 1, false, currentPage === 1);

  // Show dots if current page is beyond 3
  if (currentPage > 3) {
    const dot = document.createElement('span');
    dot.textContent = '...';
    pagination.appendChild(dot);
  }

  // Determine range of pages to show
  const start = Math.max(2, currentPage - 1);
  const end = Math.min(totalPages - 1, currentPage + 1);

  for (let i = start; i <= end; i++) {
    createButton(i, i, false, i === currentPage);
  }

  // Show dots if current page is not near the end
  if (currentPage < totalPages - 2) {
    const dot = document.createElement('span');
    dot.textContent = '...';
    pagination.appendChild(dot);
  }

  // Always show last page if it's not already shown
  if (totalPages > 1) {
    createButton(totalPages, totalPages, false, currentPage === totalPages);
  }

  // Next button
  createButton('›', currentPage + 1, currentPage === totalPages);
}


  function sortProducts() {
    allProducts.sort((a, b) => a.price - b.price);
    showPage(1);
  }

  async function loadProductCards() {
    try {
      const res = await fetch("http://localhost:5000/api/products");
      const data = await res.json();
      allProducts = data.products;
      showPage(1);
    } catch (err) {
      console.error("Error loading product cards", err);
    }
  }

  // Event listeners
  searchInput.addEventListener('input', () => showPage(1));

  // Init
  loadProductCards();


</script>



    
</body>
</html>